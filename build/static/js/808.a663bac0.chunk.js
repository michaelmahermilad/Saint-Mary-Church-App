"use strict";(self.webpackChunkst_project=self.webpackChunkst_project||[]).push([[808],{4808:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var r=t(2791),s=t(3292),n=t.n(s),i=t(7689),c=t(5063),o=t(2685),l=t(719),d=t(184);const u=function(){const{date:e,name:a,duration:t,score:s}=(0,i.UO)(),u=(0,i.s0)(),[m,p]=(0,r.useState)("Calculating..."),[h,v]=(0,r.useState)("No result"),[f,x]=(0,r.useState)("");return(0,r.useEffect)((()=>{if((new Date).toISOString().split(".")[0]>e)return void u("/");const a=()=>{try{let a=null===e||void 0===e?void 0:e.split("T")[1],t=null===a||void 0===a?void 0:a.split(":")[0],r=null===a||void 0===a?void 0:a.split(":")[1],s=60*Number(t)+Number(r),n=(new Date).toISOString(),i=null===n||void 0===n?void 0:n.split("T")[1],c=null===i||void 0===i?void 0:i.split(":")[0],o=null===i||void 0===i?void 0:i.split(":")[1],l=60*Number(c)+Number(o),d=Number(s)-Number(l),u=0,m=parseInt(d/60);m>=1&&(d-=60*m,u=m),p("".concat(u," H:").concat(d," M Left"))}catch(a){console.error("Error calculating time:",a),p("Time calculation error")}};a();const t=setInterval(a,4e4);return()=>clearInterval(t)}),[e,u]),(0,d.jsx)("div",{className:"background10",style:{width:"100vw",overflow:"hidden",overflowY:"scroll",height:"100vh",position:"relative",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",justifyContent:"space-around"},children:(new Date).toISOString().split(".")[0]<e?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"1rem"},children:[(0,d.jsx)("h3",{className:"Select7 background10",children:a}),(0,d.jsx)("h4",{className:"Select7",style:{marginTop:"2rem"},children:m}),(0,d.jsx)("h3",{className:"heading2444",style:{marginTop:"3rem"},children:f||h}),(0,d.jsx)("img",{style:{marginTop:"3rem"},src:l,className:"h07",alt:"Success"})]}),"No result"===h&&(0,d.jsx)("div",{children:(0,d.jsx)("div",{style:{boxShadow:".2px 3px 10px 2px grey",borderRadius:"17px",overflow:"hidden"},children:(0,d.jsx)(n(),{className:"h07",delay:2e3,onError:e=>{console.error("QR Scanner error:",e),x("\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0645\u0627\u0633\u062d \u0627\u0644\u0636\u0648\u0626\u064a")},onScan:async r=>{if(r)try{if(!a||!t||!e||!s)return void x("Missing required parameters");const i=r.split("@")[0],l="".concat(e,"<>").concat(a,"<>").concat(i),d=(0,o.iH)(c.Fs,"Elma7domen/".concat(i,"/attendance/").concat(l));if((await(0,o.U2)(d)).exists())v("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062d\u0636\u0648\u0631 \u0645\u0633\u0628\u0642\u0627\u064b");else{await(0,o.t8)(d,{date:e,name:a,duration:t,result:r,score:s,ID:l});const u=(0,o.iH)(c.Fs,"Elma7domen/".concat(i,"/attendance/score")),m=await(0,o.U2)(u);if(m.exists()){var n;const e=Number((null===(n=m.val())||void 0===n?void 0:n.final)||0)+Number(s);await(0,o.t8)(u,{final:e})}else await(0,o.t8)(u,{final:s});v("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062d\u0636\u0648\u0631 \u0628\u0646\u062c\u0627\u062d")}}catch(i){console.error("Error handling scan:",i),x("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062d\u0636\u0648\u0631")}},facingMode:"environment"})})})]}):(0,d.jsx)("div",{children:"\u0627\u0646\u062a\u0647\u062a \u0627\u0644\u0645\u062d\u0627\u0636\u0631\u0629"})})}},5063:(e,a,t)=>{t.d(a,{Ap:()=>d,Fs:()=>o,I8:()=>l});var r=t(4702),s=t(2685),n=t(2481),i=t(8255);const c=(0,r.ZF)({apiKey:"AIzaSyC0je3firquV-pcNWyLbHFUIFlVWXaGfbs",authDomain:"saint-mary-church.firebaseapp.com",databaseURL:"https://saint-mary-church-default-rtdb.europe-west1.firebasedatabase.app",projectId:"saint-mary-church",storageBucket:"saint-mary-church.appspot.com",messagingSenderId:"26728570187",appId:"1:26728570187:web:8fdd5f81a127eec72adcce",measurementId:"G-4L41GGSZ22"}),o=(0,s.N8)(c),l=((0,n.ad)(c),(0,i.v0)(c)),d=new i.hJ},719:(e,a,t)=>{e.exports=t.p+"static/media/yes.70e25698c99c3cb79917.webp"}}]);
//# sourceMappingURL=808.a663bac0.chunk.js.map